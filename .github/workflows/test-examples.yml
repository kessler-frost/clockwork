name: Test Examples Suite (with Haiku 4.5)

on:
  workflow_dispatch: # Manual trigger only

jobs:
  test-examples:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 1

      - name: Install uv
        uses: astral-sh/setup-uv@v5
        with:
          version: "latest"

      - name: Set up Python
        run: uv python install

      - name: Install dependencies
        run: uv sync

      - name: Set up environment variables
        run: |
          echo "CW_API_KEY=${{ secrets.CW_API_KEY }}" >> $GITHUB_ENV
          echo "CW_MODEL=anthropic/claude-haiku-4.5" >> $GITHUB_ENV
          echo "CW_BASE_URL=https://openrouter.ai/api/v1" >> $GITHUB_ENV
          echo "CW_LOG_LEVEL=INFO" >> $GITHUB_ENV

      # Note: Most examples require macOS for Apple Containers
      # GitHub Actions ubuntu runners don't support Apple Containers CLI
      # Individual examples can be tested manually on macOS
